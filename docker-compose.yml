
services:
  # Central router
  router:
    build:
      context: ./router
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    networks:
      - gpu-net
    environment:
      - LOG_LEVEL=INFO
      - NODE_URL=http://node:8005
    depends_on:
      - node

  # SmolLM2 Node Service
  node:
    build:
      context: ./node
      dockerfile: Dockerfile
    ports:
      - "8005:8005"
    networks:
      - gpu-net

networks:
  gpu-net:
    driver: bridge